(()=>{"use strict";var t=[(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={LINEAR:"linear",BEZIER:"bezier",HOLD:"hold",none:[.25,.25,.75,.75],inQuad:[.55,.085,.68,.53],inCubic:[.55,.055,.675,.19],inQuart:[.895,.03,.685,.22],inQuint:[.755,.05,.855,.06],inSine:[.47,0,.745,.715],inExpo:[.95,.05,.795,.035],inCirc:[.6,.04,.98,.335],inBack:[.6,0,.735,.045],outQuad:[.25,.46,.45,.94],outCubic:[.215,.61,.355,1],outQuart:[.165,.84,.44,1],outQuint:[.23,1,.32,1],outSine:[.39,.575,.565,1],outExpo:[.19,1,.22,1],outCirc:[.075,.82,.165,1],outBack:[.175,.885,.32,1],inOutQuad:[.455,.03,.515,.955],inOutCubic:[.645,.045,.355,1],inOutQuart:[.77,0,.175,1],inOutQuint:[.86,0,.07,1],inOutSine:[.445,.05,.55,.95],inOutExpo:[1,0,0,1],inOutCirc:[.785,.135,.15,.86],inOutBack:[.68,0,.265,1]}},(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});class s{constructor(t="",e=0){this.name="",this.time=0,this.name=t,this.time=e}}},(t,e,i)=>{var s;i.r(e),i.d(e,{default:()=>a}),function(t){t.Loop="Loop",t.Once="Once",t.PingPong="PingPong"}(s||(s={}));const a=s},(t,e,i)=>{i.r(e),i.d(e,{default:()=>r});var s=i(4),a=i(5),n=i(0);class r{constructor(t,e){this.name=(0,a.guid)(),this.time=0,this.duration=0,this.ease=n.default.none,this.easeType=n.default.BEZIER,this.props=[],this.startValues=[],this.endValues=[],this.onUpdate=void 0,this.object=t;const i=this.easeType;Object.keys(e).forEach((t=>{const i=e[t];if("name"===t)this.name=i;else if("delay"===t)this.time=i;else if("duration"===t)this.duration=i;else if("ease"===t)this.ease=i;else if("type"===t)this.easeType=i;else if("onUpdate"===t)this.onUpdate=i;else if("start"!==t){let s=this.object[t];void 0!==e.start&&(s=e.start[t]),this.props.push(t),this.startValues.push(s),this.endValues.push(i)}}));const s=this.ease[0]===this.ease[1]&&this.ease[2]===this.ease[3],r=i===this.easeType;s&&r&&(this.easeType=n.default.LINEAR)}update(t){const e=this.time,{endTime:i}=this,a=(0,s.normalize)(e,i,(0,s.clamp)(e,i,t)),n=(0,s.clamp)(0,1,this.getCurve(a));this.props.forEach(((t,e)=>{const i=this.startValues[e],a=this.endValues[e];if(Array.isArray(i)){const e=i.length,r=[];for(let t=0;t<e;++t)r.push((0,s.mix)(i[t],a[t],n));this.object[t]=r}else this.object[t]="string"==typeof i||"boolean"==typeof i?n<1?i:a:(0,s.mix)(i,a,n)})),void 0!==this.onUpdate&&this.onUpdate(n)}getCurve(t){return this.easeType===n.default.BEZIER?(0,s.cubicBezier)(t,this.ease[0],this.ease[1],this.ease[2],this.ease[3]):this.easeType===n.default.HOLD?t<1?0:1:t}isActive(t){return(0,s.between)(this.time,this.time+this.duration,t)}get startTime(){return this.time}get endTime(){return this.time+this.duration}}},(t,e,i)=>{i.r(e),i.d(e,{TWO_PI:()=>s,HALF_PI:()=>a,between:()=>n,normalize:()=>r,mix:()=>o,map:()=>h,clamp:()=>d,roundTo:()=>u,distance:()=>l,distance2:()=>c,distance3:()=>m,random:()=>p,cubicBezier:()=>g,tween:()=>b,mixArrays:()=>v});const s=2*Math.PI,a=Math.PI/2;function n(t,e,i){return i>=t&&i<=e}function r(t,e,i){return(i-t)/(e-t)}function o(t,e,i){return t*(1-i)+e*i}function h(t,e,i,s,a){return o(i,s,r(t,e,a))}function d(t,e,i){return Math.min(e,Math.max(t,i))}function u(t,e=1){return Number(t.toFixed(e))}function l(t,e){const i=t-e;return Math.sqrt(i*i)}function c(t,e,i,s){const a=t-i,n=e-s;return Math.sqrt(a*a+n*n)}function m(t,e,i,s,a,n){const r=t-s,o=e-a,h=i-n;return Math.sqrt(r*r+o*o+h*h)}function p(t,e){return o(t,e,Math.random())}function f(t,e,i,s){return 1/(3*e*t*t+2*i*t+s)}function y(t,e,i,s,a){return e*(t*t*t)+i*(t*t)+s*t+a}function g(t,e,i,s,a){if(t<=0)return 0;if(t>=1)return 1;if(function(t,e,i,s){return t===e&&i===s}(e,i,s,a))return t;const n=1-3*s+3*e-0,r=3*s-6*e+0,o=3*e-0,h=1-3*a+3*i-0,d=3*a-6*i+0,u=3*i-0;let l=t;for(let e=0;e<5;e++){const e=y(l,n,r,o,0);let i=f(l,n,r,o);i===1/0&&(i=t),l-=(e-t)*i,l=Math.min(Math.max(l,0),1)}return function(t,e,i,s,a){const n=t*t;return e*(n*t)+i*n+s*t+a}(l,h,d,u,0)}function b(t,e){const i=e.length-1;if(0===i)return e[0];const s=1/i,a=Math.min(Math.floor(t*i),i-1),n=a+1,h=r(a*s,n*s,t);return o(e[a],e[n],h)}function v(t,e,i){const s=[],a=t.length;for(let n=0;n<a;++n)s.push(o(t[n],e[n],i));return s}},(t,e,i)=>{function s(t){const e=t.lastIndexOf("/")+1,i=t.lastIndexOf(".");return t.substring(e,i)}function a(){return(Date.now()+Math.round(99999*Math.random())).toString()}i.r(e),i.d(e,{fileName:()=>s,guid:()=>a})},(t,e,i)=>{i.r(e),i.d(e,{default:()=>o});var s=i(4),a=i(3),n=i(1),r=i(2);class o{constructor(t){this.duration=0,this.keyframes=[],this.markers=[],this.mode=r.default.Loop,this.playing=!0,this.speed=1,this.time={seconds:0,prevSeconds:0,lastUpdate:0},void 0!==t&&(void 0!==t.mode&&(this.mode=t.mode),void 0!==t.duration&&(this.duration=t.duration),void 0!==t.playing&&(this.playing=t.playing),void 0!==t.speed&&(this.speed=t.speed))}dispose(){this.keyframes=[],this.markers=[]}addKeyframe(t,e){this.keyframes.push(new a.default(t,e))}addMarker(t="",e=0){this.markers.push(new n.default(t,e))}pushKeyframe(t){this.keyframes.push(t)}getMarker(t){const e=this.markers.length;for(let i=0;i<e;++i){const e=this.markers[i];if(e.name===t)return e}}goToMarker(t){const e=this.getMarker(t);void 0!==e&&(this.seconds=e.time,void 0!==e.callback&&e.callback())}play(){this.playing=!0,this.resetTime()}pause(){this.playing=!1}update(t){this.playing&&(void 0!==t&&(this.time.seconds=t),this.updateKeyframes(),this.updateTime(),this.updateMarkers())}updateKeyframes(){this.keyframes.forEach((t=>{t.isActive(this.seconds)&&t.update(this.seconds)}))}updateMarkers(){const t=this.markers.length;for(let e=0;e<t;++e){const t=this.markers[e];if((0,s.between)(this.time.prevSeconds,this.time.seconds,t.time))return void 0!==t.callback&&t.callback(),void(t.name.search("-stop")>0&&(this.pause(),this.seconds=t.time))}}updateTime(){const{now:t}=this,e=(t-this.time.lastUpdate)/1e3,i=this.time.seconds+e*this.speed;if(this.time.lastUpdate=t,this.time.prevSeconds=this.time.seconds,this.time.seconds=i,this.duration>0&&this.time.seconds>=this.duration)switch(this.mode){default:case r.default.Loop:this.time.seconds=0;break;case r.default.Once:this.time.seconds=this.duration,this.playing=!1;break;case r.default.PingPong:this.time.seconds=this.duration-e,this.speed=-Math.abs(this.speed)}this.time.seconds<0&&this.mode===r.default.PingPong&&(this.time.seconds=0,this.speed=Math.abs(this.speed))}resetTime(){this.time.lastUpdate=this.now}get now(){return(performance||Date).now()}get seconds(){return this.time.seconds}set seconds(t){this.time.seconds=t}}},(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});class s{constructor(t,e){this.name="",this.start=0,this.duration=0,this.showing=!0,this.item=void 0,this.fileID="",this.file=void 0,this.name=void 0!==t.name?t.name:"",this.start=void 0!==t.start?t.start:0,this.duration=void 0!==t.duration?t.duration:0,this.showing=void 0===t.showing||t.showing}dispose(){}update(t,e){void 0!==this.item&&void 0!==this.item.update&&this.item.update(t,void 0!==e?e:this.duration)}draw(){void 0!==this.item&&void 0!==this.item.draw&&this.item.draw()}resize(t,e){void 0!==this.item&&void 0!==this.item.resize&&this.item.resize(t,e)}animate(t,e){void 0!==this.item&&void 0!==this.item.animate&&this.item.animate(t,e)}transform(t,e){void 0!==this.item&&void 0!==this.item.transform&&this.item.transform(t,e)}showable(t){const e=this.start+this.duration;return!(this.duration>0)||t>=this.start&&t<=e}}},(t,e,i)=>{i.r(e),i.d(e,{default:()=>r});var s=i(7),a=i(4),n=i(5);class r extends s.default{constructor(t,e){super(t,e),this.fileID=(0,n.fileName)(t.content.value.source),this.file=e.audio[this.fileID]}dispose(){this.file.pause()}update(t,e){const i=this.start,s=this.start+this.file.duration,n=(0,a.between)(i,s,t);this.file.paused&&n&&this.file.play()}}},(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});var s=i(7),a=i(5);class n extends s.default{constructor(t,e){super(t,e),this.fileID=(0,a.fileName)(t.content.source),this.file=e.images[this.fileID]}}},(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});var s=i(7);class a extends s.default{}},(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});var s=i(7);class a extends s.default{}},(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});var s=i(7),a=i(5);class n extends s.default{constructor(t,e){super(t,e),this.fileID=(0,a.fileName)(t.content.source),this.file=e.videos[this.fileID],t.content.audioEnabled||(this.file.setAttribute("muted","true"),this.file.muted=!1,this.file.volume=0)}dispose(){this.file.pause()}}},(t,e,i)=>{i.r(e),i.d(e,{default:()=>l});var s=i(7),a=i(1),n=i(6),r=i(8),o=i(9),h=i(10),d=i(11),u=i(12);class l extends s.default{constructor(t,e){super(t,e),this.width=0,this.height=0,this.layers=[],this.timeline=new n.default({}),this.camera=void 0,this.width=t.width,this.height=t.height,this.timeline.duration=t.duration,this.showing=0===this.start}dispose(){this.timeline.dispose(),this.camera=void 0,this.layers.forEach((t=>{t.dispose()})),this.layers=[]}addLayer(t){t.showing=0===this.start&&0===t.start,this.layers.push(t)}update(t,e){const i=void 0!==e?e:this.timeline.duration;this.timeline.duration=i,this.timeline.update(t),this.updateLayers(this.timeline.seconds,i)}updateLayers(t,e){const i=this.layers.length;for(let s=0;s<i;++s){const i=this.layers[s],a=i.showable(t);a?i instanceof l?(i.showing||i.play(),i.update(t,e)):i.update(t,e):i.showing&&i instanceof l&&i.timeline.playing&&i.timeline.seconds>0&&(i.timeline.seconds=i.timeline.duration,i.timeline.speed<0&&(i.timeline.seconds=0)),i.showing=a}}draw(){const t=this.seconds,e=this.layers.length;for(let i=0;i<e;++i){const e=this.layers[i];e.showable(t)&&e.draw()}}play(){this.timeline.play(),this.playLayers()}pause(){this.timeline.pause(),this.pauseLayers()}playLayers(){const t=this.seconds,e=this.layers.length;for(let i=0;i<e;++i){const e=this.layers[i];e instanceof l&&e.showable(t)&&e.play()}}pauseLayers(){const t=this.layers.length;for(let e=0;e<t;++e){const t=this.layers[e];t instanceof l&&t.playing&&t.pause()}}resize(t,e){this.layers.forEach((i=>{i.resize(t,e)}))}build(t,e,i){this.name=t.name,this.width=t.width,this.height=t.height,void 0!==i&&(this.duration=Math.min(this.duration,i.duration),this.timeline.duration=this.duration);let s=t.markers.length;for(let e=0;e<s;++e){const i=t.markers[e];this.timeline.markers.push(new a.default(i.name,i.time))}s=t.layers.length;for(let i=s-1;i>-1;--i){const s=this.buildLayer(t,e,t.layers[i]);void 0!==s&&this.layers.push(s)}}buildLayer(t,e,i){let s;switch(i.type){case"adjustment":"post"===i.name&&this.buildPost(i);break;case"audio":s=this.buildLayerAudio(t,i,e);break;case"camera":this.buildCamera(i);break;case"composition":s=this.buildLayerComposition(t,i,e);break;default:case"image":s=this.buildLayerImage(t,i,e);break;case"shape":s=this.buildLayerShape(t,i,e);break;case"text":s=this.buildLayerText(t,i,e);break;case"video":s=this.buildLayerVideo(t,i,e)}return void 0!==s&&(s.duration=Math.min(this.timeline.duration,i.duration)),s}buildLayerAudio(t,e,i){return new r.default(e,i)}buildCamera(t){}buildLayerComposition(t,e,i){const s=new l(e,i);return s.build(t,e,this),s}buildLayerImage(t,e,i){return new o.default(e,i)}buildLayerShape(t,e,i){return new h.default(e,i)}buildLayerText(t,e,i){return new d.default(e,i)}buildLayerVideo(t,e,i){return new u.default(e,i)}buildPost(t){}get playing(){return this.timeline.playing}get playMode(){return this.timeline.mode}get seconds(){return this.timeline.seconds}set playMode(t){this.timeline.mode=t}set seconds(t){this.timeline.seconds=t}}}],e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={exports:{}};return t[s](a,a.exports,i),a.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(0),i(1),i(2),i(3),i(6),i(7),i(8),i(9),i(10),i(11),i(12);i(13)})();
//# sourceMappingURL=fido-composition.js.map